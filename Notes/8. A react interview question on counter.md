
# React Interview Concept: State Batching and Asynchronous Updates

---

## ðŸ”¥ **Core Concept: React State Updates are Asynchronous and Batched**

---

### ðŸš¨ **Scenario:**

In a React component, you have a counter state:

```jsx
const [counter, setCounter] = useState(15);
```

You then call the state updater multiple times like this:

```jsx
setCounter(counter + 1);
setCounter(counter + 1);
setCounter(counter + 1);
setCounter(counter + 1);
setCounter(counter + 1);
```

---

### â“ **What do you think the final value will be?**

Logically, you might expect:

```
15 â†’ 16 â†’ 17 â†’ 18 â†’ 19 â†’ 20
```

But that's **not** what happens!

---

### âŒ **Incorrect Assumption:**

React batches these state updates and reads the **same old `counter` value** (which is `15`) for all 5 updates. So:

```jsx
setCounter(counter + 1); // counter is 15 â†’ sets 16
setCounter(counter + 1); // counter is still 15 â†’ sets 16 again
...
```

Every update is working with the same stale value `15`.

âž¡ï¸ **Final value: `16` only**, not `20`.

---

### âœ… **The Right Way: Functional Updates**

If your next state depends on the **previous state**, React recommends using the **functional update** syntax:

```jsx
setCounter(prevCounter => prevCounter + 1);
```

If you call this five times:

```jsx
setCounter(prev => prev + 1);
setCounter(prev => prev + 1);
setCounter(prev => prev + 1);
setCounter(prev => prev + 1);
setCounter(prev => prev + 1);
```

Now React uses the **latest value each time** for the update.

âž¡ï¸ **Final result: `15 â†’ 20 âœ…`**

---

## ðŸ¤” **Why is this Important?**

* This is a **frequently asked React interview question**.
* It affects **performance optimization** and proper state management.
* Itâ€™s deeply connected to **Reactâ€™s Fiber architecture** and **state batching mechanism**.

---

## ðŸ”„ **Bonus Analogy (Super Simple Explanation):**

> Imagine you told 5 friends one after another:
> "Write my name on the *next* number after 15."
> But they all saw the board **at the same time**, so they all saw **15** and wrote **16**.

> But if you said:
> "Write your name on the next number **after what the previous person wrote**,"
> Then each person sees the latest update and adds 1 â†’ reaching 20 in the end.

---

## ðŸ“Œ **TL;DR Summary Table**

| Code                              | Final Counter Value |
| --------------------------------- | ------------------- |
| 5x `setCounter(counter + 1)`      | âŒ `16`              |
| 5x `setCounter(prev => prev + 1)` | âœ… `20`              |

---